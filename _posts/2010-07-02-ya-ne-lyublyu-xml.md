---
id: 173
title: 'Я не люблю XML'
date: '2010-07-02T19:35:39+00:00'
author: serge
layout: post
guid: 'http://sotnyk.com/?p=173'
permalink: /2010/07/02/ya-ne-lyublyu-xml/
---

[XML](http://ru.wikipedia.org/wiki/XML), в принципе, задумывался с благородными намерениями. Чтобы данные были читаемы человеком и легко обрабатывались компьютером. К сожалению, в результате не получили ни того, ни другого. Широта использования данного языка объясняется тем же, чем и использование WordPress. WordPress внутри написан достаточно коряво (по сравнению с тем же Typo3 и другими CMS). Но по количеству инсталляций – он номер один. Соответственно, для него разработана самая широкая база плагинов, тем, инструкций и специалистов. Вот и получаем самоподдерживающийся процесс. Но вернемся к XML  
  
Основные мои личные претензии к нему:

1\. Формат текстовый, который вроде бы можно редактировать в обычном текстовом редакторе, но… Мало-мальски большой набор редактировать очень неудобно. Даже в малом несложно ошибиться, не ввести неподдерживаемые символы.

2\. Формат достаточно сложный. Много деталей, которые мне представляются совершенно необязательными или неинтуитивными:  
– Синонимы тегов на разных языках.  
– Куча кодировок (юникода мало?).  
– XSLT-преобразования (кто скажет, что они легки в освоении и ручном кодировании?).  
– Неточное понимание стандарта – почему Ява-парсеры считают, что ненормализованный XML является неправильным? В стандарте есть только рекомендация при сохранении его нормализовать, но никак не рекомендация падать при разборе ненормализованного.  
– еще много чего.

3\. Формат текстовый, без строгой типизации. Соответственно, разбор замедляется и становится небезопасным. Есть конечно средства внесения строгой типизации на базе DTD- или [XSD-схем](http://ru.wikipedia.org/wiki/XML_Schema). Но они заставляют парсер производить еще больше работы.

4\. Да и просто – насколько избыточным является XML по сравнению с бинарными представлениями? Это разы!

В общем, я считаю XML большой ошибкой, которая заняла лидирующее положение просто потому, что появилась в идеальное время, когда индустрия начала очень нуждаться в средстве межплатформенного взаимодействия. Но никак не потому, что он хорош в плане архитектурной задумки. Подобная штука должна быть бинарной и иметь достаточный набор инструментальных средств для редактирования человеком.

Конечно, сейчас достаточно тяжело сместить лидера. Это как плевать против ветра. Но, может быть здесь сможет помочь [Protocol Buffers (protobuf)](http://code.google.com/p/protobuf/)? Сочетание мощи Гугла, хорошего покрытия парсерами различных платформ, а самое главное – правильность архитектурной задумки, вполне может помочь подвинуть XML с занимаемой позиции.

Вкратце – Protocol Buffers (protobuf), представляет собой бинарный формат для хранения, передачи и сериализации/десериализации данных. Независим от языка. Экономен. Для задач отладки или использования под инициализационные файлы (здесь тоже часто используется XML), можно воспользоваться текстовым кодированием. Доступен в исходных кодах. Легко расширяем. Если уж ему не удастся подвинуть XML, то не знаю, кому это будет под силу…