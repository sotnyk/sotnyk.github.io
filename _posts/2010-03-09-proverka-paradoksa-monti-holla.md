---
id: 99
title: 'Проверка парадокса Монти-Холла'
date: '2010-03-09T18:25:03+00:00'
author: serge
layout: post
guid: 'http://sotnyk.com/?p=99'
permalink: /2010/03/09/proverka-paradoksa-monti-holla/
---

На сайте у [Алексея Богданова](http://aabogdanov.ru/) нашел интересную заметку о [парадоксе Монти-Холла](http://aabogdanov.ru/post/Paradoks-Motni-Holla.aspx).  
  
Вкратце ([цитата из Википедии](http://ru.wikipedia.org/wiki/Парадокс_Монти_Холла)):

Представьте, что вы стали участником игры, в которой вам нужно выбрать одну из трех дверей. За одной из дверей находится автомобиль, за двумя другими дверями — козы. Вы выбираете одну из дверей, например, номер 1, после этого ведущий, который знает, где находится автомобиль, а где — козы, открывает одну из оставшихся дверей, например, номер 3, за которой находится коза. После этого он спрашивает вас, не желаете ли вы изменить свой выбор и выбрать дверь номер 2. Увеличатся ли ваши шансы выиграть автомобиль, если вы примете предложение ведущего и измените свой выбор?

Исходный код:  

```csharp
Random rnd = new Random();
int success = 0, successOld = 0;
for (int i = 0; i < 10000; i++)
{
  int carDoor = rnd.Next(3);
  int firstChoice = rnd.Next(3); // первый выбор игрока
  int openedDoor;
  do
  {
    openedDoor = rnd.Next(3); // выбор информированного ведущего 
    //отличный от выбора игрока и двери к автомобилю
  } while (openedDoor == firstChoice || openedDoor == carDoor);

  int second; // второй выбор игрока
  do
  {
    second = rnd.Next(3);
    //отличный от первого выбора и выбора ведущего
  } while (second == openedDoor || second == firstChoice);

  if (firstChoice == carDoor)
    successOld++;
  if (second == carDoor) // поверло, выиграл автомобиль
    success++;
}
Console.WriteLine("Если игрок:");
Console.WriteLine(" - сохранит свое решение P(авто)= {0}%", successOld / 100f);
Console.WriteLine(" - изменит свое решение P(авто)= {0}%", success / 100f);
```

Решил немного поменять код, представлен в посте у Алексея. Прежде всего, изменил условие выбора. Ведь если не выигрывает первый выбор, то выиграет тот, кто поменял его на противоположный. Третья дверь уже открыта и она не выигрывает!

Т.е., поменял код на следующий:

```csharp
if (firstChoice == carDoor)
    successOld++;
else
    success++;
```

И неожиданно для себя увидел, что теперь не используются переменные, которые используются в циклах (обоих)! После выкидывания ставшего ненужным кода, получаем:

```csharp
Random rnd = new Random();
const int DoorsNumber = 3;
const int Tries = 100000;
int success = 0, successOld = 0;
for (int i = 0; i < Tries; i++)
{
    int carDoor = rnd.Next(DoorsNumber);
    int firstChoice = rnd.Next(DoorsNumber); // первый выбор игрока

    if (firstChoice == carDoor)
        successOld++;
    else
        success++;
}
Console.WriteLine("Если игрок:");
Console.WriteLine(" - сохранит свое решение P(авто)= {0}%", successOld * 100f / Tries);
Console.WriteLine(" - изменит свое решение P(авто)= {0}%", success * 100f / Tries);
```

Теперь, мне и интуитивно стало понятно, почему при изменении выбора, получаем выигрыш в два раза чаще, чем если стоим на своём. Вот такая оптимизация с прояснением логики. Справедливости ради, нужно сказать, что первоначальный вариант лучше подходит к случаю, если мы захотим проверить вариант с количеством дверей больше, чем 3. Да, кстати, собственно результат работы программы - он такой же, как и у оригинальной программы: 

Если игрок:  
 – сохранит свое решение P(авто)= 33,193%  
 – изменит свое решение P(авто)= 66,807%