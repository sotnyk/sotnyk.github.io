---
id: 146
title: 'Взгляд Windows-разработчика на Mono'
date: '2010-06-02T15:40:36+00:00'
author: serge
layout: post
guid: 'http://sotnyk.com/?p=146'
permalink: /2010/06/02/vzglyad-windows-razrabotchika-na-mono/
---

Когда я выполняю функции разработчика (а жизнь этим не ограничивается), я пишу под Windows. Последние годы это в основном C#. Конечно, меня волнует, чтобы мои знания и навыки могли примениться и в мире Линукс. Даже, если такой необходимости нет и не будет, такая возможность греет мне душу. Думаю, не только мне. Поэтому, периодически пытаюсь осмотреться.

Это “осмотреться” заключается в том, что я закачиваю какой-то дистрибутив Линукса (последние годы это Ubuntu) и начинаю в нем возиться, пытаясь скомпилировать какие-то имеющиеся проекты (из простых) или пробую решить разные небольшие задачки в новых проектах.

В общем, как это происходило в последний раз. Сразу хочу предупредить, что ныряние было достаточно поверхностным – большой нужды в этом не было и целью была оценка того, насколько быстро можно здесь адаптироваться, не имея рядом квалифицированной поддержки.

Загрузил образ Убунту 10.04 с сайта [www.ubuntu.com](http://www.ubuntu.com), обновил уже стоявший Virtual Box и инсталлировал на нем систему с нуля. После установки расширений системы, стал доступен интернет, убунту предложила мне закачать еще обновления, они обновились и отключили расширения системы – сеть стала опять недоступна. Вылечилось переустановкой расширений. Это единственная маленькая проблема.

После этого заходим в менеджер пакетов и устанавливаем все, что откликается по поиску на Mono. Только отфильтровываем Monotone – это конечно тоже для разработчика, но немного из другой оперы. Я использую обычно Subversion, поэтому данный продукт я не устанавливал. Но, если установите, не думаю, что будет что-то плохое. Также не забываем документацию – без неё неудобно (лично мне).

И еще мелочь, которая относится уже ко мне лично – поставил Krusader. Привык я к программам а-ля Тотал Коммандер. Проводник так и не стал для меня полноценным файловым менеджером, хотя думаю, что его возможности я знаю неплохо. Просто две панели уже в мозжечке сидят. Почти что безусловный рефлекс.

Итак, установили все, что нам нужно. Заходим в Application/Developer, запускаем MonoDevelop. И можем наблюдать очень похожую на Visual Studio (после сравнению с тем же Эклипсом) среду разработки. Причем, солюшены из VS2008 (пока еще сижу на ней) загружаются сходу, не требуя какой-либо конвертации.

Мне очень понравился шрифт – мягкий, гладкий. Глазу приятно.

В общем, разобраться после VS оказалось достаточно просто. Что было приятно – сразу откомпилировалась и запусталась парочка совсем простых проектов, в которых я тестировал быстродействие отдельных кусков кода. На сайте Моно говорится, что они поддерживают сейчас язык версии 2.0, но нормально компилируются и конструкции, проникшие в язык гораздо позже – лямбды, LINQ и т.п.

Но, конечно же, по мере тестирования более сложных проектов начались и сложности. Вкратце перечислю некоторые из них:

- Файл app.config автоматически не копируется в выходной каталог и не переименовывается в {exe\_name}.config. Соответственно, летят сеттингсы, которые уже привычно настраивать из среды разработки. Прошло некоторое время, пока понял в чем дело.
- WinForms – приложения компилируются (по крайней мере простые), но WISIWYG-редактора для них нет. Тут я все-таки ожидал маленького чуда. Конечно, у Моно есть своя графическая библиотека, для которой есть редактор, но хотелось иметь хоть какое-то подмножество GUI, работающее и в Моно и в .Net Framework. Про большое чудо – поддержку и редактирование WPF можно и не мечтать. На сайте Моно об этом официально сказано.
- Многие проекты, с которыми я работаю, содержат в себе проекты для юнит-тестирования. Естественно в формате, который предлагает MS в своей VS2008. В Моно для этого используется NUnit, а тесты из VS2008 не понимаются. Жаль. Приходится создавать новый солюшен без данных проектов.
- Поддерживается сильверлайт. Пусть пока версия 2.0, но не за горами уже 3.0 (предварительную версию можно вроде уже сейчас опробовать). Но… WISIWYG-редактора здесь тоже нет. Править нужно XAML. Да, я понимаю, что его нужно знать иначе часто не сделаешь все, что задумал. Но одно дело “полировать”, а другое – писать все руками.
- Откуда возник Сильверлайт? Дело в том, что в принципе можно сделать неплохую кроссплатформенную связку – логика приложения ложится на сервис, работающий в бэкграунде, а красивое “лицо” делается на сильверлайте. Прозрачно же объединить же эти две части может WCF, реализованный и в Моно. Но здесь тоже есть подводные камни. Небольшое тестирование показало, что named-pipe end-point (самые производительные и не требующие особых настроек) в Моно не реализованы. Реализованы TCP и Http end-pointы. А это уже падение производительности и возможность нарваться на занятый порт (что у меня и вышло в самом начале). Кроме того, Http-вариант самохостящегося сервера (а именно самохостящиеся WCF-сервера лучше всего подходят для связки Сильверлайт-МоноЛогика) с работающей под виндой конфигурацией не стал работать в Моно. Т.е., ошибка соединения не приходила, но и ответа не было. Я не стал подробно разбираться в причинах, поскольку стало понятно, что при переводе реального приложения под платформу Линукс, здесь тоже возникнут вопросы. Которые потребуют определенного времени.

На этом в общем-то можно и закончить этот небольшой обзор. Основной мой вывод – если будет нужно, то “mono”. Не стоит переоценивать лёгкость переезда – как только начинаешь переносить что-то мало-мальски сложное, возникают проблемы, требующие времени и опыта. Но это возможно. Нынешняя связка Ubuntu + Mono, как никогда дружелюбна для разработчика из мира Windows и .NET Framework. Раньше реально можно было посматривать только на Яву.

P.S.: WinForms – редактор вроде обещают. Только непонятно, когда: [http://www.mono-project.com/WinForms\_Designer](http://www.mono-project.com/WinForms_Designer)