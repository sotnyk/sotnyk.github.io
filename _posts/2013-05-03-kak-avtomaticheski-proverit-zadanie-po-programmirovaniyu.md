---
id: 1284
title: 'Как автоматически проверить задание по программированию?'
date: '2013-05-03T22:25:46+00:00'
author: serge
layout: post
guid: 'http://sotnyk.com/?p=1284'
permalink: /2013/05/03/kak-avtomaticheski-proverit-zadanie-po-programmirovaniyu/
---

![](https://sotnyk.github.io/wp-content/uploads/2013/05/ML-course.jpg "ML-course")Давно хотел пройти широко разрекламированный курс [Machine Learning](https://class.coursera.org/ml-003/class/index), который ведет довольно известный лектор, Andrew Ng. И вот, наконец, выбрал время. С 22-го апреля понемногу прохожу лекции, тесты (это, в общем-то, не сильно отличается от другого Стенфордского курса – [“Введение в искусственный интеллект”](https://www.ai-class.com/)). Но вот один момент меня давно и сильно интересовал – были обещаны еще и задачи, связанные с программированием.

Мне просто было интересно – как можно проверить правильность выполненных заданий? Вручную, с учетом количества учеников, это нереально. К тому же утомительно и чревато ошибками. Наверняка тут должен быть какой-то способ автоматизировать проверку.  
  
И вот, на второй неделе дошел до заданий по программированию. Конечно, как эта проверка делается на самом деле, я не знаю, но я понял, как сделал бы я. Сами задачи я здесь приводить не буду, чтобы не нарушать соглашения, но опишу в общих чертах, что представляет собой задание.

Все задания необходимо выполнить в свободно распространяемой среде Octave. Она выполняет Matlab-совместимый код. При этом отсутствует GUI, работа идет в командной строке. Первая серия заданий представляла собой набор файлов с расширением “.m” (Matlab-файлы). В этих файлах записаны шаблоны функций – т.е., входные и выходные параметры, некоторый дополнительный код инициализации. Необходимо было их наполнить полезным смыслом (желательно векторизованными версиями алгоритмов), прогнать на своем компьютере и отослать, используя команду submit (она запускала скрипт отсылки задания, находящийся в файле submit.m).  
Фактически, нам был задан API (входные и выходные параметры функций) и дана спецификация, что эти функции должны сделать. Теперь, конечно, понятно, что должно происходить дальше. А дальше, по прибытии файла с одной изолированной функцией на сервер, она запускается в своей песочнице (чтобы не дать возможности запустить вредоносный код) с несколькими наборами параметров. Выходные результаты сравниваются с эталонной реализацией. Наверное, с некоторой погрешностью. Если все совпало, значит, шаг задания выполнен.

Получили типичные юнит-тесты!

Конечно, возникают дополнительные вопросы. Хорошо, скриптовые языки типа M, наверное, JavaScript, и другие, не так уж сложно заставить исполняться в песочнице. Если бы я делал подобные задачи на C#, то, пожалуй, можно было бы пойти похожим путем – скомпилировать пересланный файл, используя CSharpCodeProvider и выполнить его с правами, которые бы не давали доступа к файловой системе и другим важным ресурсам.  
Но вот как покрыть юнит-тестами стохастические системы типа генетических алгоритмов? Для этого есть подход, когда [вместо генератора псевдослучайных чисел инжектируется заранее заданная последовательность](http://blogs.msdn.com/b/ploeh/archive/2007/05/11/testingagainstrandomness.aspx). Но с ГА есть загвоздка – есть в общем-то эквивалентные реализации одного и того же, которые будут давать разные результаты на одной и той же псевдослучайной последовательности. Простой пример: для турнирного отбора предков алгоритм А заполняет вначале слот1, потом слот2, потом слот3 и, наконец, слот4. А алгоритм B заполняет так: слот1, слот3, слот2, слот4.

Далее происходит выбор самого приспособленного предка между слотами 1 и 2 (Предок1) и слотами 3 и 4 (Предок2).

Алгоритмы эквивалентные. Но будут давать разные результаты на одних входных данных последовательностях.

Как такое можно “отъюниттестить”? Есть предложения?

Конечно, можно вынести в отдельные задания детерминированные шаги – реализация одноточечного и двухточечного кроссовера с уже заданными точками разрыва и предками, турнирный отбор уже выбранных предков. Но все равно останутся стохастические части, которые тоже хотелось бы отдать на реализацию студентам. Как проверить их?

Кстати, в Machine Learning по плану есть и нейронные сети. Там часто встречаются вещи, базирующиеся на применении случайных последовательностей (отжиг, начальная инициализация и т.п.) Будет примерно через месяц. Посмотрю, как выходит там из положения Andrew Ng…