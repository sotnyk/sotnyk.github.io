---
id: 1253
title: 'О TypeScript'
date: '2012-10-07T13:01:40+00:00'
author: serge
layout: post
guid: 'http://sotnyk.com/?p=1253'
permalink: /2012/10/07/o-typescrip/
---

![](https://sotnyk.github.io/wp-content/uploads/2012/10/TypeScript.jpg "TypeScript")

Неоднократно писал уже о своих тяжелых взаимоотношениях с языками без статической типизации, к которым, прежде всего, относится повсеместно используемый JavaScript. Не то, что бы я не мог писать на нем или понять чужой код, но поиски опечаток, неправильно переданных типов и т.п., превращаются в муку на любом реальном по размеру проекте. С надеждой наблюдал за потугами классических языков – Java (applets) и C# (Silverligth) пробиться здесь. К сожалению, не срослось. Все заполонил JavaScript.

Тем не менее, и тут есть варианты. Один из них – развиваемый под крылом Google [язык Dart](http://www.dartlang.org/), сочетающий в себе возможности быстрого прототипирования (без явного использования типов) и полноценную систему статической типизации. Поглядываю на него достаточно давно, но этот проект пока развивается достаточно вяленько. В том плане, что длительное время не было разных нужных вещей, без которых реальная разработка очень неудобна. Хотя, вот заглянул сегодня – у них уже появилась IDE (похоже на вариант Eclipse). Можно будет покопаться.

Чем хороша задумка Dart – программы, написанные на этом языке, могут выполняться как специальной средой исполнения, так и компилироваться в JavaScrips, а значит, выполняться везде, где есть поддержка JS. Те же браузеры, которые могут исполнять код Dart напрямую, вероятно смогут получить дополнительную производительность. Но, самое главное для меня – наличие статической типизации, которая избавляет меня от глупых и трудно выискиваемых (иногда) опечаток.

И вот, появился еще один вариант – [TypeScript от Майкрософта](http://www.typescriptlang.org). В отличие от Dart, мы сразу получили полноценную среду исполнения ([плагин в VS 2012](http://www.microsoft.com/en-us/download/details.aspx?id=34790)), поддерживающую отладку, intellisense, портированные заголовки распространенных JS-библиотек, таких как jQuery. В общем, при первом знакомстве возникло ощущение, что можно уже брать и включать в рабочие проекты.

Интересна также философия TypeScript. Если в двух словах – это надмножество JS. Т.е., в проекте можно использовать работающий код на JavaScript. При этом, можно использовать новые языковые расширения, которые и служат для проверки типов, добавляют разные вкусности вроде автосвойств, наследование в классическом (С++/C#/Java) стиле, модули и много чего еще. Весь код компилируется в javascript-файлы с таким же именем, но расширение меняется с .ts на .js. Проверки типов производятся только на этапе компиляции .ts, поэтому в рантайме они не мешают и не снижают производительность.

В общем, такой подход мне понравился – здесь приходят на ум параллели с обычными компиляторами, которые компилируют в машинный код (или код какой-то виртуальной машины). Ведь машинный код тоже не занимается проверками типов.

Конечно, поначалу возникают вопросы по поводу банальных вещей. Например, я достал из документа какой-то элемент по его селектору. Я знаю, что это за элемент (наследник HTMLElement), но метод, который достал его, считает, что он достал именно HTMLElement и не дает обратиться к свойствам наследника. Да, в таких случаях можно воспользоваться приведением типа (xxx as SomeType в C#). Но, я не нашел, как это сделать в примерах и при поверхностном гуглении. В общем, вышел из положения так. Объявил следующую функцию, которая позволяет обойти контроль типов:

```javascript
function AnyTypeConvertor(anObject) {  
 return anObject;  
}  
```

Конечно, это все болезни роста, но темпы роста TypeScript кажутся достаточно хорошими, чтобы посматривать сюда почаще.