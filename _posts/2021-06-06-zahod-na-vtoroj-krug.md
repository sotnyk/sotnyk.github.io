---
id: 1907
title: 'Заход на второй круг'
date: '2021-06-06T21:32:29+00:00'
author: serge
layout: post
guid: 'https://sotnyk.ga/?p=1907'
permalink: /2021/06/06/zahod-na-vtoroj-krug/
---

![/wp-content/uploads/2021/06/windows-linux-mac.jpg](sotnyk.github.io/wp-content/uploads/2021/06/windows-linux-mac.jpg)<figcaption>image from https://techcaption.com/operating-system-best-windows-linux-mac-os/</figcaption>За прошедший год я сменил основные десктопные платформы, полностью сменил то, как я устанавливаю и настраиваю Python (спасибо Надежде Романенко за то, что подсказала некоторые моменты, которые были неочевидны и которые сложно домыслить самостоятельно). Данный пост не будет подробным тьюториалом по всему этому набору. Скорее, набросок основных моментов для себя (как обычно).

Итак, долго сидел под Виндой. Это была необходимость на прошлом месте работы. Плевался немного, когда оказывалось, что что-то не работает в ней из библиотек для машинного обучения, все мечтал совсем уйти на Убунту, но понимание, что даже просто на настройку рабочего окружения уйдет немало времени, заставляло меня долго оставаться на Windows 10. Точнее, это когда-то еще была Windows 7, которая последовательными апдейтами превратилась в Windows 8, затем 8.1, и далее. Да, я могу аккуратно работать за системой, не сильно «засирая» её, при этом даже нормально работая (еще с 2013 года). Но всему приходит предел.

В это время, на новом рабочем месте выдали MacBook. Я же мечтал о машине, куда я могу поставить Убунту. Да, Убунту на мак поставить можно, но у меня не поднялась рука. К тому же, почему бы не исследовать еще один мир, который долгое время проходил мимо меня? Я много месяцев старался. Но все же должен признать, что хоть прикасаться к маку приятно, он работает стабильно и надежно, но он меня подбешивает и дает достаточно много отрицательных эмоций. Вот почему:

- Мелкая моторика. За долгие годы, у меня сложились очень прочные стереотипы клавиатурных сочетаний. Копирование/вставка, переход на начало строки – в конец. Переход по словам. Это самые частовстречаемые действия. И тут они не подходят. Даже, когда я подключаю внешнюю клавиатуру с кнопкой Винды, приходится нажимать Win+C вместо Ctrl+C. Навигация также работает иначе. И эти мелочи, которые обычно делаешь вслепую, существенно замедляют набор текста, ввод кода. Настолько, что это начинает напрягать. Да, наверное, можно переучиться, но для этого нужно везде перейти на маки с его клавиатурой и алгоритмами навигации. А я не готов к этому.
- Отсутствует масса приложений, для которых есть бесплатные или очень умеренно платные варианты под Виндовс: Total Commander, Notepad++, TortoiseGit. Оставшись без первых двух, я понял, как они экономили мне время – ведь я работаю с текстами. С большим количеством текстов, в разных форматах и кодировках. И в экосистеме Мака я так и не нашел полных аналогов. Что-то похожее, всегда платное, но всегда чего-то нужного не оказывалось. Это тоже замедляет работу настолько, что это доходит до сознания. Поверьте, то, что я пишу – это не после нескольких дней знакомства. Это результат нескольких месяцев регулярной работы.
- Есть куча других особенностей системы, которые совершенно не принципиальны (типа отсутствия CUDA – что не дает возможности запустить нормально обучение на GPU локально, а это бывает удобно просто для небольших моделей и отладки), но вместе накапливаются в определенное недовольство платформой.

В общем, мак оставил впечатление очень хорошей, продуманной платформы и системы, но не моей. Продолжаю на ней работать – хорошо, когда не сидишь на одном месте и мозги не ржавеют, но не вижу пока данную систему среди своих фаворитов.

Вернемся к домашнему PC. Имея в запасе неплохой ноут (Windows 10) и стабильно работающий Макбук, я, наконец, решился переехать на Убунту. Был куплен под систему новый SSD + HDD (да, я люблю иметь возможность подстраховаться) и началась эпопея с Убунту. Тоже не буду долго описывать все детали этих четырех месяцев, только основные выводы:

- Многие вещи в Убунту ближе к Винде, чем на Маках. Из-за этого моя мелкая моторика постоянно мне говорила «спасибо»
- Довольно большой выбор хороших бесплатных приложений (тот же Notepad++ вообще устанавливается из магазина). Есть некоторые детали, но в общем они решаются.
- Просто отлично работает все связанное с ML. Язык, фреймворки, пакеты.
- С драйверами… Многое работает отлично и без особых проблем, но если начались сложности, то бывает крайне проблематично решить вопрос. Например, так и не поборол нормальный ребут. Какое-то устройство на материнке при окончании работы оставалось в состоянии, с которым BIOS уже не мог справиться. Приходилось выключать питание на 10 секунд – после этого шла нормальная загрузка. Драйвер принтера отлично работал, но в определенный момент просто отпал и все. Так и не смог его оживить без переустановки.
- GUI. Он близок к Виндовому, но все же недоработанный. Регулярно возникают какие-то подвисания. Возможности видеокарты мало кто использует, зато очень интенсивно юзается процессор (со всеми вытекающими тормозами). Шрифты похожи на то, как это было в винде двадцатилетней давности – антиалиасингом в основном занимаются браузеры. Хорошие шрифты в консоли. Но большая часть приложений – их неудобно (соответственно и утомительно) читать.

В общем, Убунту – вещь офигенная, если бы не GUI и разная периферия. Но консоль (я её люблю, а после Убунту полюбил еще больше), не позволяет все делать оптимально. Правильное сочетание консоли и GUI позволяет мне работать более производительно. Уже даже ради PyCharm, я не уйду на чистую консоль.

И тут вспоминаем, что в Windows появилась WSL. Фактически, Убунту (в моем случае) в Виндовс. Раньше я периодически использовал её. А еще – Docker и много всего другого, что позволяет объединить лучшее из двух миров.

В общем, ушел на очередной заход эволюции систем. SSD+HDD с Убунту отключены, чтобы в любой момент можно было переключиться, Виндовс наконец-то переустановлена заново, избавился от мусора прошлых «веков» (вроде Visual Studio всех версий, начиная с VS 2008). Как-то незаметно, без тех плясок с бубном, которые были ранее, установлена CUDA. И только с SSH (с которым я подружился наконец в Убунту) пришлось повозиться, чтобы подружить его с Git, который в PyCharm.

Напоследок, делюсь «тайным знанием», которое мне принесла Надежда 😊. Практически все онлайн курсы, многие книги, рекомендуют использовать Anaconda в качестве дистрибутива Python. Долгие годы я так и делал, она с собой много всего несет сразу, позволяет легко создавать и использовать виртуальные окружения. При этом, очень часто, когда создаешь виртуальное окружение, возникают какие-то непонятные ошибки. Особенно, при использовании Jupyter Notebook, но не только. И я провел много часов, пытаясь их исправить. Иногда, переустанавливая несколько раз эту самую Анаконду.

Так вот, в 2021 году Анаконду можно выкинуть. Достаточно установить Python с сайта <https://www.python.org/downloads/> и дальше виртуальные окружения строить, используя пакет venv, который идет вместе с Python. Все, что необходимо, описано здесь: <https://docs.python.org/3/tutorial/venv.html>. Добавлю от себя только пару моментов:

- Желательно первым в новое виртуальное окружение добавлять пакет wheel – без него некоторые пакеты отказываются ставиться
- Удобно, если виртуальное окружение «одноразовое», под проект, то создавать его единообразно, внутри проекта, в папке ./venv/. Не забудьте только потом добавить эту папку в .gitignore
- Если же у вас есть набор библиотек, которые вы часто используете в разных исследованиях данных, тестах архитектур моделей, то наоборот, удобно создать виртуальное окружение где-то в легкозапоминающемся месте. У меня, например, есть c:envsnlp

Удивительно, как отказ от Анаконды упростил работу. Хотя, в свое время, она была очень полезной штукой. А ведь её так же рекомендуют использовать в сравнительно свежих онлайн курсах новичкам.